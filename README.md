# Bellabeat Case Study

## Scenario
You are a junior data analyst working on the marketing analyst team at Bellabeat, a high-tech manufacturer of health-focused products for women. Bellabeat is a successful small company, but they have the potential to become a larger player in the global smart device market. Urška Sršen, cofounder and Chief Creative Officer of Bellabeat, believes that analyzing smart device fitness data could help unlock new growth opportunities for the company. You have been asked to focus on one of Bellabeat’s products and analyze smart device data to gain insight into how consumers are using their smart devices. The insights you discover will then help guide marketing strategy for the company. You will present your analysis to the Bellabeat executive team along with your high-level recommendations for Bellabeat’s marketing strategy

## Problem Statements
1. What are some trends in smart device usage?
2. How could these trends apply to Bellabeat customers?
3. How could these trends help influence Bellabeat marketing strategy?

## Preparing of Data for Analysis
For the purpose of this exercise, I will be using FitBit Fitness Tracker Data that contains personal fitness tracker from thirty fitbit users. This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.

The dataset consists of 18 .csv files stored on Kaggle.com. The dataset consists of daily, hourly, minute and seconds level information. I will only be looking at the dailys dataset for a high-level analysis, which includes the daily activity, sleep and weight file. 

For the purpose of this exercise, I will be using PostgreSQL to process the dataset. Visualisations will be done via Tableau.

```TSQL
-- create table to store the daily activity file
CREATE TABLE daily_activity
(
    Id BIGINT,
    ActivityDate DATE,
    TotalSteps INTEGER,
    TotalDistance DECIMAL,
    TrackerDistance DECIMAL,
    LoggedActivitiesDistance DECIMAL,
    VeryActiveDistance DECIMAL,
    ModeratelyActiveDistance DECIMAL,
    LightActiveDistance DECIMAL,
    SedentaryActiveDistance DECIMAL,
    VeryActiveMinutes INTEGER,
    FairlyActiveMinutes INTEGER,
    LightlyActiveMinutes INTEGER,
	SedentaryMinutes INTEGER,
	Calories INTEGER
)

-- Importing data to the tables created 

COPY daily_activity
FROM '/Users/xxx/Desktop/Bellabeat/dailyActivity_merged.csv' 
DELIMITER ',' 
CSV HEADER; 

-- create table to store weight log info
CREATE TABLE weight_log
(
	Id BIGINT,
	Date TIMESTAMP,
	WeightKG DECIMAL,
	WeightPounds DECIMAL,
	Fat INTEGER,
	BMI DECIMAL,
	IsManualReport BOOLEAN,
	LogId BIGINT
)

-- Importing data to the tables created 

COPY weight_log
FROM '/Users/xxx/Desktop/Bellabeat/weightLogInfo_merged.csv' 
DELIMITER ',' 
CSV HEADER; 

-- Update date column to consistent as date instead of timestamp

UPDATE weight_log
SET Date = DATE(Date)

ALTER TABLE weight_log
ALTER Date TYPE DATE

-- create table for sleep log
CREATE TABLE sleep_log
(
	ID BIGINT,
	SleepDay TIMESTAMP,
	TotalSleepRecords INTEGER,
	TotalMinutesAsleep INTEGER,
	TotalTimeInBed INTEGER
)	

-- importing data for sleep log table

COPY sleep_log
FROM '/Users/xxx/Desktop/Bellabeat/sleepDay_merged.csv' 
DELIMITER ',' 
CSV HEADER; 

```
## Processing of Data 

I will be cleaning the data and exploring the dataset for better understanding.

From the analysis below, we will only be proceeding to run our analysis with the activity and sleep log file as we only have 8 IDs logged for the weight log and it is not a substantial dataset for our analysis 

```TSQL
-- To look at the number of data collected for each data set. 

SELECT COUNT(DISTINCT(Id))
FROM daily_activity

-- 33 distinct entries

SELECT COUNT(DISTINCT(Id))
FROM weight_log

-- 8 distinct entries

SELECT COUNT(DISTINCT(Id))
FROM sleep_log

-- 24 distinct entries 

```

I will clean the sleep log file to ensure that data format is the same as our activity file. 

```TSQL

-- Update date column to consistent as date instead of timestamp

UPDATE sleep_log
SET SleepDay = DATE(SleepDay)

ALTER TABLE sleep_log
ALTER SleepDay TYPE DATE

```

Joining the two tables together to provide one results table that we will be running our analysis on

```TSQL
-- join sleep table to activity table and create a new results table

CREATE TABLE results AS
	SELECT t1.*, t2.TotalSleepRecords, t2.TotalMinutesAsleep, t2.TotalTimeInBed
	FROM daily_activity t1
	INNER JOIN sleep_log t2 ON
	t2.id = t1.id AND 
	t2.sleepday = t1.activitydate

SELECT COUNT(DISTINCT(Id))
FROM results

--24 distinct count returned 
```

## Analyzing of Data

```TSQL
-- analyzing of dataset, to find out if there is a seasonality in activity by day of week
SELECT TO_CHAR(ActivityDate, 'Day') as day_of_week, TO_CHAR(ActivityDate, 'D') as day_num, 
	COUNT(DISTINCT(id)) as num_of_users,
	ROUND(AVG(totalsteps),0) as avg_steps,
	ROUND(AVG(totaldistance),2) as avg_distance,
	ROUND(AVG(calories),0) as avg_calories,
	ROUND(AVG(totalminutesasleep),2) as avg_sleeptime
FROM results
GROUP BY day_of_week, day_num
ORDER BY day_num ASC
```
Data Output:
| day_of_week | day_num | num_of_users | avg_steps | avg_distance | avg_calories | avg_sleeptime |
|-------------|---------|--------------|-----------|--------------|--------------|---------------|
| Sunday      | 1       | 20           | 7298      | 5.18         | 2277         | 452.75        |
| Monday      | 2       | 16           | 9340      | 6.61         | 2465         | 418.83        |
| Tuesday     | 3       | 18           | 9183      | 6.43         | 2496         | 404.54        |
| Wednesday   | 4       | 19           | 8023      | 5.72         | 2378         | 434.68        |
| Thursday    | 5       | 19           | 8205      | 5.8          | 2316         | 402.37        |
| Friday      | 6       | 21           | 7901      | 5.51         | 2330         | 405.42        |
| Saturday    | 7       | 21           | 9949      | 7.1          | 2527         | 420.81        |

```TSQL

-- find out the average active minutes across all users

SELECT
	ROUND(AVG(VeryActiveMinutes),2) as AVG_VeryActive, 
	ROUND(AVG(FairlyActiveMinutes),2) as AVG_FairlyActive, 
	ROUND(AVG(LightlyActiveMinutes),2) as AVG_LightlyActive, 
	ROUND(AVG(SedentaryMinutes),2) as AVG_Sedentary
FROM results
```
Data Output:
| avg_veryactive | avg_fairlyactive | avg_lightlyactive | avg_sedentary |
|----------------|------------------|-------------------|---------------|
| 25.19          | 18.04            | 216.85            | 712.17        |



